#include <limits.h>
#include <stddef.h>

#include "prime_po2s.h"

/* If ULONG_MAX is not 2^16-1, 2^32-1, or 2^64-1, we are in for a bad time unless
 * I suddenly become willing to do a lot more typing. */
#define MAX_16BIT_UNSIGNED 65535UL
#define MAX_32BIT_UNSIGNED 4294967295UL
#define MAX_64BIT_UNSIGNED 18446744073709551615UL
#if (ULONG_MAX != MAX_16BIT_UNSIGNED && ULONG_MAX != MAX_32BIT_UNSIGNED && \
     ULONG_MAX != MAX_64BIT_UNSIGNED)
#error Platform unsupported: ULONG_MAX not in (2^16-1, 2^32-1, 2^64-1)
#endif

const unsigned long prime_po2s[] = {
	/* at least a 16-bit system - required by all ISO C standards */
	1UL,
	2UL,
	3UL,
	7UL,
	13UL,
	31UL,
	61UL,
	127UL,
	251UL,
	509UL,
	1021UL,
	2039UL,
	4093UL,
	8191UL,
	16381UL,
	32749UL,
	65521UL

#if ULONG_MAX > MAX_16BIT_UNSIGNED
	/* at least a 32-bit system */

	,
	131071UL,
	262139UL,
	524287UL,
	1048573UL,
	2097143UL,
	4194301UL,
	8388593UL,
	16777213UL,
	33554393UL,
	67108859UL,
	134217689UL,
	268435399UL,
	536870909UL,
	1073741789UL,
	2147483647UL,
	4294967291UL
#endif

#if ULONG_MAX > MAX_32BIT_UNSIGNED
	/* at least a 64-bit system */

	,
	8589934583UL,
	17179869143UL,
	34359738337UL,
	68719476731UL,
	137438953447UL,
	274877906899UL,
	549755813881UL,
	1099511627689UL,
	2199023255531UL,
	4398046511093UL,
	8796093022151UL,
	17592186044399UL,
	35184372088777UL,
	70368744177643UL,
	140737488355213UL,
	281474976710597UL,
	562949953421231UL,
	1125899906842597UL,
	2251799813685119UL,
	4503599627370449UL,
	9007199254740881UL,
	18014398509481951UL,
	36028797018963913UL,
	72057594037927931UL,
	144115188075855859UL,
	288230376151711717UL,
	576460752303423433UL,
	1152921504606846883UL,
	2305843009213693951UL,
	4611686018427387847UL,
	9223372036854775783UL
#endif
};

const size_t prime_po2s_cap = (sizeof(prime_po2s) / sizeof(*prime_po2s));
